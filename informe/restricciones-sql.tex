

\emph{Para una escuela, tiene que haber un coach cada 5 competidores.}

\begin{lstlisting}[language=SQL]
select (
    select count(p.numcertificado)
    from participante p, estudiante e
    where p.numcertificado = e.numcertificado and e.idescuela = @idEscuela)
  <= 5* (
    select count(c.numcertificado)
    from coach c, estudiante e
    where c.numcertificado = e.numcertificado and e.idescuela = @idEscuela);
\end{lstlisting}

\emph{Si una inscripción es grupal, debe tener 8 participantes, 5 titulares y 3 suplentes.}

\begin{lstlisting}[language=SQL]
select (
  select count(p.numcertificado)
  from participante p, esintegrantede e
  where e.numcertificado = p.numcertificado and
              e.idinscripcion = @idInscripcionGrupal and
	      e.estitular) = 5 and (
  select count(p.numcertificado)
  from participante p, esintegrantede e
  where e.numcertificado = p.numcertificado and
              e.idinscripcion = @idInscripcionGrupal and
	      not e.estitular) = 3;
\end{lstlisting}

\emph{Toda competencia tiene mínimo 3 inscriptos.}

\begin{lstlisting}[language=SQL]
select (
  select count(e.idinscripcion)
  from esen e
  where e.idcompetencia = @idCompetencia) >= 3;
\end{lstlisting}

\emph{Para cada competencia (luego de haberse jugado) tiene que haber exactamente un primer puesto y exactamente un segundo puesto y exactamente un tercer puesto.}

\begin{lstlisting}[language=SQL]
select (
  select count(e.idinscripcion)
  from esen e
  where e.idcompetencia = @idCompetencia and e.puesto = 1) = 1 and (
  select count(e.idinscripcion)
  from esen e
  where e.idcompetencia = @idCompetencia and e.puesto = 2) = 1 and (
  select count(e.idinscripcion)
  from esen e
  where e.idcompetencia = @idCompetencia and e.puesto = 3) = 1;
\end{lstlisting}

\emph{En cada competencia tiene que haber al menos un presidente de mesa, un arbitro central, varios jueces y 3 suplentes.}

\begin{lstlisting}[language=SQL]
select (
  select count(e.numdeplacaarbitro)
  from esarbitradapor e
  where e.idcompetencia = @idCompetencia and
        e.funciondelarbitro = "PresidenteDeMesa") >= 1 and (
  select count(e.numdeplacaarbitro)
  from esarbitradapor e
  where e.idcompetencia = @idCompetencia and
        e.funciondelarbitro = "Central") >= 1 and (
  select count(e.numdeplacaarbitro)
  from esarbitradapor e
  where e.idcompetencia = @idCompetencia and
        e.funciondelarbitro = "Juez") >= 2 and (
  select count(e.numdeplacaarbitro)
  from esarbitradapor e
  where e.idcompetencia = @idCompetencia and
        e.funciondelarbitro = "Suplente") >= 3;
\end{lstlisting}

\emph{El numero de jueces debe ser mayor o igual que el cantidadDeArbitros de la competencia.}

\begin{lstlisting}[language=SQL]
select (
  select count(e.numdeplacaarbitro)
  from esarbitradapor e
  where e.idcompetencia = @idCompetencia) = (
  select c.cantidaddearbitros
  from competencia c
  where c.idcompetencia = @idCompetencia);
\end{lstlisting}

\emph{Si una inscripción es individual debe ser integrada por un participante.}

\begin{lstlisting}[language=SQL]
select 1
from inscripcionindividual i, esintegrantede e
where i.idinscripcion = e.idinscripcion
group by e.idinscripcion
having count(e.numcertificado) != 1;
\end{lstlisting}

\emph{Cantidad de participantes por inscripción: Combate por equipos tiene inscripciones grupales.}

\begin{lstlisting}[language=SQL]
select 1
from competenciacombateporequipos c, inscripcion i, esen e
where c.idcompetencia =e.idcompetencia and
            i.idinscripcion = e.idinscripcion and
	    (select count(e2.numcertificado)
	     from esintegrantede e2
	     where i.idinscripcion = e2.idinscripcion) != 8;
\end{lstlisting}

\emph{Cantidad de participantes por inscripción: El resto tiene inscripciones individuales.}

\begin{lstlisting}[language=SQL]
select 1
from competenciacombate c, inscripcion i, esen e
where c.idcompetencia =e.idcompetencia and
            i.idinscripcion = e.idinscripcion and
	    (select count(e2.numcertificado)
	     from esintegrantede e2
	     where i.idinscripcion = e2.idinscripcion) != 1;
\end{lstlisting}

\begin{lstlisting}[language=SQL]
select 1
from competenciaformas c, inscripcion i, esen e
where c.idcompetencia =e.idcompetencia and
            i.idinscripcion = e.idinscripcion and
	    (select count(e2.numcertificado)
	     from esintegrantede e2
	     where i.idinscripcion = e2.idinscripcion) != 1;
\end{lstlisting}

\begin{lstlisting}[language=SQL]
select 1
from competenciarotura c, inscripcion i, esen e
where c.idcompetencia =e.idcompetencia and
            i.idinscripcion = e.idinscripcion and
	    (select count(e2.numcertificado)
	     from esintegrantede e2
	     where i.idinscripcion = e2.idinscripcion) != 1;
\end{lstlisting}

\begin{lstlisting}[language=SQL]
select 1
from competenciasalto c, inscripcion i, esen e
where c.idcompetencia =e.idcompetencia and
            i.idinscripcion = e.idinscripcion and
	    (select count(e2.numcertificado)
	     from esintegrantede e2
	     where i.idinscripcion = e2.idinscripcion) != 1;
\end{lstlisting}

\emph{Si una inscripción es individual, entonces el participante es titular.}

\begin{lstlisting}[language=SQL]
select 1
from inscripcionindividual i, esintegrantede e
where i.idinscripcion = e.idinscripcion and not e.estitular;
\end{lstlisting}

